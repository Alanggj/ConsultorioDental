â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        ANÃLISIS DE RÃšBRICA - PROYECTO FINAL REDES III
        Sistema de GestiÃ³n de Consultorio Dental
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1. DESARROLLO - SISTEMA FUNCIONANDO (18%)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… COMPLETADO:
--------------
â€¢ Altas, bajas, cambios: 
  - âœ“ Alta de usuarios (registro.html)
  - âœ“ Alta de citas (cita.html, admin-nueva-cita.html)
  - âœ“ Alta de servicios (via SQL)
  - âœ“ Alta de recetas (receta-detalle.html)
  - âœ“ Baja de citas (cancelaciÃ³n)
  - âœ“ Cambios en perfil de usuario (perfil.html)

â€¢ Funcionalidades principales (5):
  1. âœ“ Sistema de login (admin/usuario)
  2. âœ“ GestiÃ³n de citas
  3. âœ“ GestiÃ³n de recetas
  4. âœ“ Control de vacaciones
  5. âœ“ Reporte de ganancias

â€¢ Uso de secuencias (1):
  - âœ“ SERIAL en todas las tablas (auto-incremento)

â€¢ Uso de vistas (mÃ­nimo 3):
  - âœ“ Vista_Agenda_Maestra
  - âœ“ Vista_Reporte_Ganancias  
  - âœ“ Vista_Recetas_Completas

â€¢ Funciones:
  - âœ“ calcular_edad()

â€¢ Triggers:
  - âœ“ fn_crear_expediente_automatico()
  - âœ“ trg_validar_cita_en_vacaciones()

âŒ FALTA IMPLEMENTAR:
---------------------
â€¢ Reportes (3 requeridos):
  âŒ FALTA 1 reporte adicional con informaciÃ³n compleja
     IDEAS:
     - Reporte de pacientes frecuentes
     - AnÃ¡lisis de servicios mÃ¡s solicitados
     - Historial mÃ©dico por paciente

â€¢ Consultas con JOIN (mÃ­nimo 2 datos):
  âŒ Agregar 1 consulta mÃ¡s compleja que involucre mÃºltiples JOINs
     IDEA: Reporte de eficiencia de doctores (citas atendidas, 
           tiempo promedio, ganancias generadas)

â€¢ Ãndices (mÃ­nimo 1):
  âŒ NO hay Ã­ndices personalizados
     SUGERENCIAS:
     CREATE INDEX idx_cita_fecha ON Cita(fecha);
     CREATE INDEX idx_cita_usuario ON Cita(usuario_id);
     CREATE INDEX idx_usuario_correo ON Usuario(correo);

â€¢ Funciones de agregaciÃ³n (SUM, AVG, etc):
  âš ï¸  Usar mÃ¡s en reportes
     IDEA: Calcular promedio de edad de pacientes, 
           suma total de ganancias por mes/aÃ±o

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2. OPERADORES SQL (2%)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âŒ UNION, INTERSECT o MINUS (1 consulta):
  NO IMPLEMENTADO
  
  IDEAS PRÃCTICAS:
  ----------------
  1. UNION: Combinar fechas de citas y vacaciones
     SELECT fecha FROM Cita WHERE estatus = 'agendada'
     UNION
     SELECT fecha_inicio FROM Periodo_vacacional;
  
  2. EXCEPT: Pacientes registrados sin citas
     SELECT usuario_id FROM Usuario
     EXCEPT
     SELECT DISTINCT usuario_id FROM Cita;
  
  3. INTERSECT: Pacientes con citas Y recetas
     SELECT usuario_id FROM Cita
     INTERSECT
     SELECT u.usuario_id FROM Usuario u
     JOIN Cita c ON u.usuario_id = c.usuario_id
     JOIN Receta r ON c.cita_id = r.cita_id;

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3. GROUP BY / HAVING (3%)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âš ï¸  PARCIALMENTE IMPLEMENTADO
  
  FALTA:
  ------
  Consultas mÃ¡s complejas con GROUP BY y HAVING
  
  IDEAS:
  ------
  1. Servicios con mÃ¡s de 5 reservaciones:
     SELECT s.nombre, COUNT(*) as total
     FROM Servicio s
     JOIN Detalle_cita dc ON s.servicio_id = dc.servicio_id
     GROUP BY s.servicio_id, s.nombre
     HAVING COUNT(*) > 5;
  
  2. Doctores con promedio de atenciÃ³n superior a X:
     SELECT a.nombre, COUNT(c.cita_id) as total_citas
     FROM Admin a
     JOIN Cita c ON a.admin_id = c.admin_id
     WHERE c.estatus = 'atendida'
     GROUP BY a.admin_id, a.nombre
     HAVING COUNT(c.cita_id) > 10;

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
4. PL/SQL (22% TOTAL)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… COMPLETADO:
--------------
â€¢ Triggers (2 mÃ­nimo): âœ“ 2 triggers implementados
â€¢ Funciones (2 mÃ­nimo): âš ï¸ Solo 1 funciÃ³n (calcular_edad)

âŒ FALTA:
---------
â€¢ Procedimientos almacenados (2 mÃ­nimo, 1 con cursor):
  âŒ Solo tienes sp_guardar_expediente (sin cursor)
  
  SUGERENCIAS:
  ------------
  1. Procedimiento con cursor para generar reporte mensual:
     CREATE OR REPLACE PROCEDURE generar_reporte_mensual(
         p_mes INT, p_anio INT
     ) AS
     BEGIN
         -- Cursor para recorrer todas las citas del mes
         -- Calcular totales, generar estadÃ­sticas
     END;
  
  2. Procedimiento para limpiar citas canceladas antiguas:
     CREATE OR REPLACE PROCEDURE limpiar_citas_antiguas(
         p_dias_antiguedad INT
     ) AS
     BEGIN
         DELETE FROM Cita 
         WHERE estatus = 'cancelada' 
         AND fecha < CURRENT_DATE - p_dias_antiguedad;
     END;

â€¢ Cursores (1 mÃ­nimo en procedimiento o funciÃ³n):
  âŒ NO IMPLEMENTADO
  
  EJEMPLO:
  --------
  CREATE OR REPLACE FUNCTION calcular_ganancias_doctor(
      p_admin_id INT, p_mes INT, p_anio INT
  ) RETURNS DECIMAL AS $$
  DECLARE
      cur_citas CURSOR FOR 
          SELECT c.cita_id, dc.total
          FROM Cita c
          JOIN Detalle_cita dc ON c.cita_id = dc.cita_id
          WHERE c.admin_id = p_admin_id
          AND EXTRACT(MONTH FROM c.fecha) = p_mes
          AND EXTRACT(YEAR FROM c.fecha) = p_anio;
      v_total DECIMAL := 0;
      v_record RECORD;
  BEGIN
      OPEN cur_citas;
      LOOP
          FETCH cur_citas INTO v_record;
          EXIT WHEN NOT FOUND;
          v_total := v_total + v_record.total;
      END LOOP;
      CLOSE cur_citas;
      RETURN v_total;
  END;
  $$ LANGUAGE plpgsql;

â€¢ Funciones adicionales (1 mÃ¡s requerida):
  IDEAS:
  ------
  - calcular_edad_promedio_pacientes()
  - validar_horario_disponible(fecha, hora)
  - obtener_proximo_horario_libre(fecha)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
5. CUBE / ROLLUP (3%)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âŒ NO IMPLEMENTADO

SUGERENCIAS:
------------
1. AnÃ¡lisis de ganancias con ROLLUP:
   SELECT 
       EXTRACT(YEAR FROM fecha) as anio,
       EXTRACT(MONTH FROM fecha) as mes,
       SUM(monto) as total
   FROM Pago p
   JOIN Cita c ON p.cita_id = c.cita_id
   GROUP BY ROLLUP(EXTRACT(YEAR FROM fecha), EXTRACT(MONTH FROM fecha));

2. AnÃ¡lisis multidimensional con CUBE:
   SELECT 
       a.tipo,
       s.nombre as servicio,
       COUNT(*) as total_citas
   FROM Cita c
   JOIN Admin a ON c.admin_id = a.admin_id
   JOIN Detalle_cita dc ON c.cita_id = dc.cita_id
   JOIN Servicio s ON dc.servicio_id = s.servicio_id
   GROUP BY CUBE(a.tipo, s.nombre);

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
6. MANEJO DE TRANSACCIONES (3% EXTRA)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… PARCIALMENTE IMPLEMENTADO:
  - âœ“ En POST /api/citas (BEGIN/COMMIT/ROLLBACK)

MEJORAR:
--------
â€¢ Agregar transacciones en mÃ¡s operaciones crÃ­ticas
â€¢ Documentar uso de transacciones en el cÃ³digo

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
7. ANÃLISIS DE IMPACTO MATEMÃTICO/ESTADÃSTICO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âŒ NO IMPLEMENTADO

REQUISITOS:
-----------
1. Realizar consultas CON y SIN Ã­ndices
2. Elaborar grÃ¡fica comparativa de resultados (tiempos)
3. Analizar efectos del uso de base de datos relacional
4. Conclusiones sobre tiempos de manejo de informaciÃ³n

PLAN DE ACCIÃ“N:
---------------
1. Crear consultas de prueba pesadas
2. Medir tiempos SIN Ã­ndices
3. Crear Ã­ndices estratÃ©gicos
4. Medir tiempos CON Ã­ndices
5. Generar grÃ¡ficas comparativas (puede ser en Excel)
6. Documentar resultados en reporte

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
8. CONCLUSIONES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âŒ PENDIENTE:
  - Conclusiones de equipo (8%)
  - Conclusiones individuales por integrante (7%)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
RESUMEN DE PRIORIDADES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ”´ ALTA PRIORIDAD (MÃ¡s puntos):
-------------------------------
1. [6%] Implementar 2 procedimientos almacenados (1 con cursor)
2. [6%] Implementar 1 funciÃ³n adicional
3. [4%] Implementar cursor en procedimiento o funciÃ³n
4. [3%] Implementar GROUP BY/HAVING en consultas complejas
5. [3%] Implementar CUBE o ROLLUP

ğŸŸ¡ MEDIA PRIORIDAD:
-------------------
6. [2%] Crear 1 Ã­ndice personalizado y documentar
7. [2%] Implementar UNION, INTERSECT o EXCEPT
8. [15%] Conclusiones (equipo e individuales)

ğŸŸ¢ BAJA PRIORIDAD:
------------------
9. [3%] AnÃ¡lisis de impacto con grÃ¡ficas
10. [3%] Bonus: Manejo de transacciones (ya parcialmente hecho)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
RECOMENDACIONES FINALES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Enfocarse primero en PL/SQL (procedimientos y cursores) = 22%
2. Agregar consultas avanzadas (GROUP BY/HAVING, UNION) = 5%
3. Implementar Ã­ndices y medir impacto = 2-5%
4. Escribir conclusiones bien fundamentadas = 15%
5. Si hay tiempo: Implementar CUBE/ROLLUP = 3%

TOTAL POTENCIAL A GANAR: ~47% adicional

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
