<!doctype html>
<html lang="es">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Administrar Expedientes - Sonrisa Perfecta</title>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/bootstrap-icons.css" rel="stylesheet">
    <link href="css/templatemo-medic-care.css" rel="stylesheet">
    <link href="css/styles.css" rel="stylesheet">
</head>

<body id="top">

    <main>
        <nav class="navbar navbar-expand-lg bg-light fixed-top shadow-lg m">
            <div class="container">
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav mx-auto">
                        <li class="nav-item"><a class="nav-link" href="panel-admin.html">Panel</a></li>
                        <li class="nav-item active"><a class="nav-link" href="admin-expedientes.html">Expedientes</a></li>
                        <li class="nav-item"><a class="nav-link" href="admin-citas.html">Citas</a></li>
                        <li class="nav-item"><a class="nav-link" href="admin-recetas.html">Recetas</a></li>
                    </ul>
                </div>
            </div>
        </nav>

        <section class="section-padding" style="padding-top: 10rem;">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <h2 class="text-center mb-4">Gestión de Expedientes</h2>
                        <a href="panel-admin.html" class="btn btn-outline-primary mb-4">
                            <i class="bi-arrow-left"></i> Volver al Panel
                        </a>
                        <a href="expediente-detalle.html" class="btn btn-primary mb-4">
                            <i class="bi-plus-circle"></i> Crear Nuevo Expediente
                        </a>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">
                        <div class="card shadow-lg">
                            <div class="card-body">

                                <div class="input-group mb-3">
                                    <span class="input-group-text" id="icono-busqueda"><i class="bi-search"></i></span>
                                    <input type="text" class="form-control" id="buscador-pacientes"
                                        placeholder="Buscar paciente por nombre o cédula..."
                                        aria-label="Buscar paciente" aria-describedby="icono-busqueda">
                                </div>
                                <div class="table-responsive">
                                    <table class="table table-hover align-middle">
                                        <thead class="table-light">
                                            <tr>
                                                <th>Nombre del Paciente</th>
                                                <th>Última Visita</th>
                                                <th>Cédula (o ID)</th>
                                                <th class="text-end">Acciones</th>
                                            </tr>
                                        </thead>
                                        <tbody id="tabla-expedientes">
                                            <tr>
                                                <td><strong>Carlos Méndez</strong></td>
                                                <td>2025-01-22</td>
                                                <td>123456789</td>
                                                <td class="text-end">
                                                    <a href="expediente-detalle.html?id=1"
                                                        class="btn btn-sm btn-outline-primary" title="Ver/Editar">
                                                        <i class="bi-pencil-fill"></i>
                                                    </a>
                                                    <button class="btn btn-sm btn-outline-danger" title="Eliminar"
                                                        onclick="eliminarExpediente(1)">
                                                        <i class="bi-trash-fill"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-secondary"
                                                        title="Descargar PDF" onclick="descargarPDF(1)">
                                                        <i class="bi-download"></i>
                                                    </button>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td><strong>Ana García</strong></td>
                                                <td>2024-11-15</td>
                                                <td>987654321</td>
                                                <td class="text-end">
                                                    <a href="expediente-detalle.html?id=2"
                                                        class="btn btn-sm btn-outline-primary" title="Ver/Editar">
                                                        <i class="bi-pencil-fill"></i>
                                                    </a>
                                                    <button class="btn btn-sm btn-outline-danger" title="Eliminar"
                                                        onclick="eliminarExpediente(2)">
                                                        <i class="bi-trash-fill"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-secondary"
                                                        title="Descargar PDF" onclick="descargarPDF(2)">
                                                        <i class="bi-download"></i>
                                                    </button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script src="js/bootstrap.bundle.min.js"></script>
    <script>
        // --- INICIO: Lógica para la barra de búsqueda ---
        document.getElementById('buscador-pacientes').addEventListener('keyup', function () {
            let terminoBusqueda = this.value.toLowerCase();
            let filas = document.querySelectorAll('#tabla-expedientes tr');

            filas.forEach(function (fila) {
                // Obtenemos el texto de toda la fila
                let textoFila = fila.textContent.toLowerCase();

                if (textoFila.includes(terminoBusqueda)) {
                    fila.style.display = ''; // Muestra la fila si coincide
                } else {
                    fila.style.display = 'none'; // Oculta la fila si no coincide
                }
            });
        });
        // --- FIN: Lógica para la barra de búsqueda ---


        // Aquí iría tu lógica de JavaScript para:
        // 1. Cargar los pacientes desde la base de datos (con fetch) y llenar la tabla.
        // 2. La función eliminarExpediente(id)
        // 3. La función descargarPDF(id)
    </script>
</body>

</html>