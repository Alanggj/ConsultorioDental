<!doctype html>
<html lang="es">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Administrar Recetas - Sonrisa Perfecta</title>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/bootstrap-icons.css" rel="stylesheet">
    <link href="css/templatemo-medic-care.css" rel="stylesheet">
    <link href="css/styles.css" rel="stylesheet">
</head>

<body id="top">

    <main>
        <nav class="navbar navbar-expand-lg bg-light fixed-top shadow-lg">
            <div class="container">
                <a class="navbar-brand mx-auto d-lg-none" href="index.html">
                    Sonrisa Perfecta
                    <strong class="d-block">Finanzas</strong>
                </a>

                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav mx-auto">
                        <li class="nav-item"><a class="nav-link" href="index.html">Inicio Web</a></li>
                        <li class="nav-item"><a class="nav-link text-warning" href="panel-admin.html">Panel Admin</a></li>
                        <li class="nav-item"><a class="nav-link" href="admin-citas.html">Citas</a></li>
                        <li class="nav-item"><a class="nav-link" href="admin-expedientes.html">Expedientes</a></li>
                        <li class="nav-item active">
                            <a class="nav-link text-success fw-bold" href="admin-recetas.html">Recetas</a>
                        </li>
                        <li class="nav-item"><a class="nav-link" href="admin-ganancias.html">Ganancias</a></li>
                        <li class="nav-item"><a class="nav-link" href="admin-vacaciones.html">Vacaciones</a></li>
                    </ul>
                        <span id="bienvenida" class="ms-auto text-primary fw-bold d-none"></span>
                </div>
            </div>
        </nav>

        <section class="section-padding" style="padding-top: 10rem;">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <h2 class="text-center mb-4">Gestión de Recetas</h2>
                        <a href="panel-admin.html" class="btn btn-outline-primary mb-4">
                            <i class="bi-arrow-left"></i> Volver al Panel
                        </a>
                        <a href="receta-detalle.html" class="btn btn-primary mb-4">
                            <i class="bi-plus-circle"></i> Generar Nueva Receta
                        </a>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">
                        <div class="card shadow-lg">
                            <div class="card-body">

                                <div class="input-group mb-3">
                                    <span class="input-group-text" id="icono-busqueda-receta"><i class="bi-search"></i></span>
                                    <input type="text" class="form-control" id="buscador-recetas"
                                        placeholder="Buscar por paciente o medicamento..."
                                        aria-label="Buscar receta" aria-describedby="icono-busqueda-receta">
                                </div>

                                <div class="table-responsive">
                                    <table class="table table-hover align-middle">
                                        <thead class="table-light">
                                            <tr>
                                                <th>Nombre del Paciente</th>
                                                <th>Fecha de Emisión</th>
                                                <th>Medicamento Principal</th>
                                                <th class="text-end">Acciones</th>
                                            </tr>
                                        </thead>
                                        <tbody id="tabla-recetas">
                                            <tr>
                                                <td><strong>Carlos Méndez</strong></td>
                                                <td>2025-01-22</td>
                                                <td>Ketorolaco (Dolor agudo)</td>
                                                <td class="text-end">
                                                    <a href="receta-detalle.html?id=1"
                                                        class="btn btn-sm btn-outline-primary" title="Ver/Editar">
                                                        <i class="bi-pencil-fill"></i>
                                                    </a>
                                                    <button class="btn btn-sm btn-outline-danger" title="Eliminar"
                                                        onclick="eliminarReceta(1)">
                                                        <i class="bi-trash-fill"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-secondary"
                                                        title="Descargar PDF" onclick="descargarRecetaPDF(1)">
                                                        <i class="bi-download"></i>
                                                    </button>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td><strong>Ana García</strong></td>
                                                <td>2024-11-15</td>
                                                <td>Enjuague Clorhexidina 0.12%</td>
                                                <td class="text-end">
                                                    <a href="receta-detalle.html?id=2"
                                                        class="btn btn-sm btn-outline-primary" title="Ver/Editar">
                                                        <i class="bi-pencil-fill"></i>
                                                    </a>
                                                    <button class="btn btn-sm btn-outline-danger" title="Eliminar"
                                                        onclick="eliminarReceta(2)">
                                                        <i class="bi-trash-fill"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-secondary"
                                                        title="Descargar PDF" onclick="descargarRecetaPDF(2)">
                                                        <i class="bi-download"></i>
                                                    </button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script src="js/bootstrap.bundle.min.js"></script>
    <script>
        // --- Lógica de búsqueda actualizada para RECETAS ---
        document.getElementById('buscador-recetas').addEventListener('keyup', function () {
            let terminoBusqueda = this.value.toLowerCase();
            // Apunta al ID de la tabla de recetas
            let filas = document.querySelectorAll('#tabla-recetas tr'); 

            filas.forEach(function (fila) {
                let textoFila = fila.textContent.toLowerCase();
                if (textoFila.includes(terminoBusqueda)) {
                    fila.style.display = '';
                } else {
                    fila.style.display = 'none';
                }
            });
        });

        // Aquí iría tu lógica de JavaScript para:
        // 1. Cargar las recetas desde la base de datos (con fetch).
        // 2. La función eliminarReceta(id)
        // 3. La función descargarRecetaPDF(id)
    </script>
</body>
</html>